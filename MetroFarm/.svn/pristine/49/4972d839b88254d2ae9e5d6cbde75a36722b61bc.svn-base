package co.com.farmatech.metrofarm.bimanager.maintenance;

import co.com.farmatech.metrofarm.dao.calibration.CalibrationDaoImpl;
import co.com.farmatech.metrofarm.dao.calibration.CalibrationDaoService;
import co.com.farmatech.metrofarm.dao.maintenance.MaintenanceDaoImpl;
import co.com.farmatech.metrofarm.dao.maintenance.MaintenanceDaoService;
import co.com.farmatech.metrofarm.datasource.DataSourceConnector;
import co.jankins.psf.common.exception.JankinsMarshallException;
import co.jankins.psf.common.metrofarm.exception.JankerExceptionEnum;

import com.co.farmatech.metrofarm.dto.DtoMantenimiento;

public class MgrMaintenanceImpl implements MgrMaintenanceService{
	
	MaintenanceDaoService maintenanceDao=new MaintenanceDaoImpl();
	
	@Override
	public DtoMantenimiento createFirstMaintenance(
			DtoMantenimiento mantenimiento, DataSourceConnector source) {
		// TODO Auto-generated method stub
		if(!maintenanceDao.EquipmentMaintenance(mantenimiento.getEquipo(), source.getConexion())){
			return maintenanceDao.createFirstMaintenance(mantenimiento, source.getConexion());
		}else{
			throw new JankinsMarshallException(JankerExceptionEnum.E_60000.getDescription(),JankerExceptionEnum.E_60000.getValue());
		}
	}

}
