##Autenticar Usuario###
users.authenticate = SELECT U.numeroId,U.idDocumento,U.nombresUsuario,U.apellidosUsuario,U.emailUsuario,U.telefonoUsuario,U.telefono2Usuario,U.celularUsuario,U.usuario,U.contrasena,U.preguntaSeguridad,U.respuestaSeguridad,U.estado as estadoUsuario,P.idPerfil,P.nombrePerfil,P.estado,P.GuardarUsuariao,P.BuscarUsuario,P.ModificarUsuario,P.EliminarUsuario,P.GuardarPerfil,P.BuscarPerfil,P.ModificarPerfil,P.EliminarPerfil,P.GuardarEquipo,P.BuscarEquipo,P.ModificarEquipo,P.EliminarEquipo,P.NotificaEquipos,P.GuardarMantenimiento,P.BuscarMantenimiento,P.ModificarMantenimiento,P.EliminarMantenimiento,P.Notificaciones_mant_mes,P.Notificaciones_man_ven_mes,P.GuardarCalificacion,P.BuscarCalificacion,P.ModificarCalificacion,P.EliminarCalificacion,P.Notificaciones_calif_mes,P.Notificaciones_calif_ven_mes,P.GuardarCalibracion,P.BuscarCalibracion,P.ModificarCalibracion,P.EliminarCalibracion,P.Notificaciones_calib_mes,P.Notificaciones_calib_ven,P.GuardarMantGen,P.BuscarMantGen,P.ModificarMantGen,P.EliminarMantGen,P.Notificaciones_mantgen_mes,P.Notificaciones_mantgen_vencida FROM Usuario U INNER JOIN PERFIL P ON P.idPerfil=U.idPerfil where U.usuario=? AND U.contrasena=?
users.userByDocument = SELECT U.numeroId,U.idDocumento,U.nombresUsuario,U.apellidosUsuario,U.emailUsuario,U.telefonoUsuario,U.telefono2Usuario,U.celularUsuario,U.usuario,U.contrasena,U.preguntaSeguridad,U.respuestaSeguridad,U.estado as estadoUsuario,P.idPerfil,P.nombrePerfil,P.estado,P.GuardarUsuariao,P.BuscarUsuario,P.ModificarUsuario,P.EliminarUsuario,P.GuardarPerfil,P.BuscarPerfil,P.ModificarPerfil,P.EliminarPerfil,P.GuardarEquipo,P.BuscarEquipo,P.ModificarEquipo,P.EliminarEquipo,P.NotificaEquipos,P.GuardarMantenimiento,P.BuscarMantenimiento,P.ModificarMantenimiento,P.EliminarMantenimiento,P.Notificaciones_mant_mes,P.Notificaciones_man_ven_mes,P.GuardarCalificacion,P.BuscarCalificacion,P.ModificarCalificacion,P.EliminarCalificacion,P.Notificaciones_calif_mes,P.Notificaciones_calif_ven_mes,P.GuardarCalibracion,P.BuscarCalibracion,P.ModificarCalibracion,P.EliminarCalibracion,P.Notificaciones_calib_mes,P.Notificaciones_calib_ven,P.GuardarMantGen,P.BuscarMantGen,P.ModificarMantGen,P.EliminarMantGen,P.Notificaciones_mantgen_mes,P.Notificaciones_mantgen_vencida FROM Usuario U INNER JOIN PERFIL P ON P.idPerfil=U.idPerfil where U.numeroId=?

###Usuarios###
users.validateCreate = Select count(*) as existe FROM Usuario where UPPER(numeroId)=UPPER(?) OR usuario=?
users.createUser = INSERT INTO Usuario (numeroId,idDocumento,nombresUsuario,apellidosUsuario,emailUsuario,telefonoUsuario,telefono2Usuario,celularUsuario,usuario,contrasena,preguntaSeguridad,respuestaSeguridad,idPerfil,estado)VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)
users.updateUser = UPDATE Usuario SET idDocumento=?,nombresUsuario=?,apellidosUsuario=?,emailUsuario=?,telefonoUsuario=?,telefono2Usuario=?,celularUsuario=?,usuario=?,contrasena=?,preguntaSeguridad=?,respuestaSeguridad=?,idPerfil=?,estado=? WHERE numeroId=?
users.findUsers =  SELECT U.numeroId,U.idDocumento,U.nombresUsuario,U.apellidosUsuario,U.emailUsuario,U.telefonoUsuario,U.telefono2Usuario,U.celularUsuario,U.usuario,U.contrasena,U.preguntaSeguridad,U.respuestaSeguridad,U.estado as estadoUsuario,P.idPerfil,P.nombrePerfil,P.estado,P.GuardarUsuariao,P.BuscarUsuario,P.ModificarUsuario,P.EliminarUsuario,P.GuardarPerfil,P.BuscarPerfil,P.ModificarPerfil,P.EliminarPerfil,P.GuardarEquipo,P.BuscarEquipo,P.ModificarEquipo,P.EliminarEquipo,P.NotificaEquipos,P.GuardarMantenimiento,P.BuscarMantenimiento,P.ModificarMantenimiento,P.EliminarMantenimiento,P.Notificaciones_mant_mes,P.Notificaciones_man_ven_mes,P.GuardarCalificacion,P.BuscarCalificacion,P.ModificarCalificacion,P.EliminarCalificacion,P.Notificaciones_calif_mes,P.Notificaciones_calif_ven_mes,P.GuardarCalibracion,P.BuscarCalibracion,P.ModificarCalibracion,P.EliminarCalibracion,P.Notificaciones_calib_mes,P.Notificaciones_calib_ven,P.GuardarMantGen,P.BuscarMantGen,P.ModificarMantGen,P.EliminarMantGen,P.Notificaciones_mantgen_mes,P.Notificaciones_mantgen_vencida,ROW_NUMBER() OVER (order by U.numeroId) AS RNUM FROM Usuario U INNER JOIN PERFIL P ON P.idPerfil=U.idPerfil WHERE 1=1
users.findUsersCount = SELECT count(*) as counter FROM Usuario where 1=1

###Perfiles####
users.profilebyuser = Select P.idPerfil,P.nombrePerfil,P.estado,P.GuardarUsuariao,P.BuscarUsuario,P.ModificarUsuario,P.EliminarUsuario,P.GuardarPerfil,P.BuscarPerfil,P.ModificarPerfil,P.EliminarPerfil,P.GuardarEquipo,P.BuscarEquipo,P.ModificarEquipo,P.EliminarEquipo,P.NotificaEquipos,P.GuardarMantenimiento,P.BuscarMantenimiento,P.ModificarMantenimiento,P.EliminarMantenimiento,P.Notificaciones_mant_mes,P.Notificaciones_man_ven_mes,P.GuardarCalificacion,P.BuscarCalificacion,P.ModificarCalificacion,P.EliminarCalificacion,P.Notificaciones_calif_mes,P.Notificaciones_calif_ven_mes,P.GuardarCalibracion,P.BuscarCalibracion,P.ModificarCalibracion,P.EliminarCalibracion,P.Notificaciones_calib_mes,P.Notificaciones_calib_ven,P.GuardarMantGen,P.BuscarMantGen,P.ModificarMantGen,P.EliminarMantGen,P.Notificaciones_mantgen_mes,P.Notificaciones_mantgen_vencida From perfiles P where P.idPerfil=?
profile.createProfile= INSERT INTO Perfil (nombrePerfil,estado,GuardarUsuariao,BuscarUsuario,ModificarUsuario,EliminarUsuario,GuardarPerfil,BuscarPerfil,ModificarPerfil,EliminarPerfil,GuardarEquipo,BuscarEquipo,ModificarEquipo,EliminarEquipo,NotificaEquipos,GuardarMantenimiento,BuscarMantenimiento,ModificarMantenimiento,EliminarMantenimiento,Notificaciones_mant_mes,Notificaciones_man_ven_mes,GuardarCalificacion,BuscarCalificacion,ModificarCalificacion,EliminarCalificacion,Notificaciones_calif_mes,Notificaciones_calif_ven_mes,GuardarCalibracion,BuscarCalibracion,ModificarCalibracion,EliminarCalibracion,Notificaciones_calib_mes,Notificaciones_calib_ven,GuardarMantGen,BuscarMantGen,ModificarMantGen,EliminarMantGen,Notificaciones_mantgen_mes,Notificaciones_mantgen_vencida) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
profile.updateProfile= UPDATE Perfil SET nombrePerfil=?,estado=?,GuardarUsuariao=?,BuscarUsuario=?,ModificarUsuario=?,EliminarUsuario=?,GuardarPerfil=?,BuscarPerfil=?,ModificarPerfil=?,EliminarPerfil=?,GuardarEquipo=?,BuscarEquipo=?,ModificarEquipo=?,EliminarEquipo=?,NotificaEquipos=?,GuardarMantenimiento=?,BuscarMantenimiento=?,ModificarMantenimiento=?,EliminarMantenimiento=?,Notificaciones_mant_mes=?,Notificaciones_man_ven_mes=?,GuardarCalificacion=?,BuscarCalificacion=?,ModificarCalificacion=?,EliminarCalificacion=?,Notificaciones_calif_mes=?,Notificaciones_calif_ven_mes=?,GuardarCalibracion=?,BuscarCalibracion=?,ModificarCalibracion=?,EliminarCalibracion=?,Notificaciones_calib_mes=?,Notificaciones_calib_ven=?,GuardarMantGen=?,BuscarMantGen=?,ModificarMantGen=?,EliminarMantGen=?,Notificaciones_mantgen_mes=?,Notificaciones_mantgen_vencida=? WHERE idPerfil=?
profile.findProfiles= SELECT idPerfil,nombrePerfil,estado,GuardarUsuariao,BuscarUsuario,ModificarUsuario,EliminarUsuario,GuardarPerfil,BuscarPerfil,ModificarPerfil,EliminarPerfil,GuardarEquipo,BuscarEquipo,ModificarEquipo,EliminarEquipo,NotificaEquipos,GuardarMantenimiento,BuscarMantenimiento,ModificarMantenimiento,EliminarMantenimiento,Notificaciones_mant_mes,Notificaciones_man_ven_mes,GuardarCalificacion,BuscarCalificacion,ModificarCalificacion,EliminarCalificacion,Notificaciones_calif_mes,Notificaciones_calif_ven_mes,GuardarCalibracion,BuscarCalibracion,ModificarCalibracion,EliminarCalibracion,Notificaciones_calib_mes,Notificaciones_calib_ven,GuardarMantGen,BuscarMantGen,ModificarMantGen,EliminarMantGen,Notificaciones_mantgen_mes,Notificaciones_mantgen_vencida,ROW_NUMBER() OVER (order by idPerfil) AS RNUM FROM Perfil WHERE 1=1
profile.findProfilesCount = SELECT count(*) as counter FROM Perfil where 1=1

###Equipos####
equipment.findEquipment = SELECT codigoInventario,codigoMetrologia,numeroSerie,nombreEquipo,marca,modelo,ubicacion,fechaRegistro,clienteRegistro,idTipoEquipo,frecuenciaCalibacion,frecuenciaMantenimiento,frecuenciaCalifiOperativa,frecuenciaCalifiDesempeno,fotoEquipo,extencionFoto,estado,observaciones,ROW_NUMBER() OVER (order by codigoInventario) AS RNUM FROM Equipo where 1=1
equipment.findEquipmentCount = SELECT count(*) as counter FROM Equipo where 1=1
equipment.findEquipmentExist = SELECT count(*) as existe FROM Equipo where UPPER(codigoInventario)=UPPER(?) OR UPPER(codigoMetrologia)=UPPER(?) OR UPPER(numeroSerie)=UPPER(?)
equipment.createEquipment = INSERT INTO Equipo(codigoInventario,codigoMetrologia,numeroSerie,nombreEquipo,marca,modelo,ubicacion,fechaRegistro,clienteRegistro,idTipoEquipo,frecuenciaCalibacion,frecuenciaMantenimiento,frecuenciaCalifiOperativa,frecuenciaCalifiDesempeno,fotoEquipo,extencionFoto,estado,observaciones)VALUES(UPPER(?),UPPER(?),UPPER(?),?,?,?,?,GETDATE(),?,?,?,?,?,?,?,?,?,?)
equipment.updateEquipment = UPDATE Equipo SET codigoMetrologia=UPPER(?),ubicacion=?,idTipoEquipo=?,frecuenciaCalibacion=?,frecuenciaMantenimiento=?,frecuenciaCalifiOperativa=?,frecuenciaCalifiDesempeno=?,fotoEquipo=?,estado=?,observaciones=? where UPPER(codigoInventario)=UPPER(?) 
equipment.validChangeTypeManInst = SELECT count(*) as numeroMantenimientos FROM MantenimientoInstrumentos where UPPER(equipoMantenimiento)=UPPER(?)
equipment.validChangeTypeManEquipo = SELECT count(*) as numeroMantenimientos FROM MantenimientoEquipos where UPPER(equipoMantenimiento)=UPPER(?)

###Change register###
changeRegister.find = SELECT E.codigoInventario,R.aplicado,R.cual,U.nombresUsuario+' '+U.apellidosUsuario as solicitado,R.fechaSolicitud,R.area,R.prioridad,R.tipoDocumento,R.otro,R.situacionActual,R.situacionPropuesta,R.razon,R.clasificacion,R.tipoCambio,E.nombreEquipo,R.lote,R.op,R.tamano,R.justificacion,R.idSolicitud FROM RegistroCambios R INNER JOIN Equipo E ON UPPER(R.codigoInventario)=UPPER(E.codigoInventario)INNER JOIN Usuario U ON U.numeroId=R.solicitado where UPPER(idSolicitud)=UPPER(?)
changeRegister.list = SELECT E.codigoInventario,R.aplicado,R.cual,U.nombresUsuario+' '+U.apellidosUsuario as solicitado,R.fechaSolicitud,R.area,R.prioridad,R.tipoDocumento,R.otro,R.situacionActual,R.situacionPropuesta,R.razon,R.clasificacion,R.tipoCambio,E.nombreEquipo,R.lote,R.op,R.tamano,R.justificacion,R.idSolicitud FROM RegistroCambios R INNER JOIN Equipo E ON UPPER(R.codigoInventario)=UPPER(E.codigoInventario)INNER JOIN Usuario U ON U.numeroId=R.solicitado
changeRegister.save = INSERT INTO RegistroCambios (codigoInventario,aplicado,cual,solicitado,fechaSolicitud,area,prioridad,tipoDocumento,otro,situacionActual,situacionPropuesta,razon,clasificacion,tipoCambio,lote,op,tamano,justificacion,idSolicitud) VALUES (?,?,?,?,GETDATE(),?,?,?,?,?,?,?,?,?,?,?,?,?,?)

###Calibration###
equipment.calibration = SELECT codigoCalibracion,equipoCalibracion,division,exactitud,valorMaximo,valorMinimo,rangoCalibracion,rangoTrabajo,proveedor,fechaRegistro,ProximaCalibracion,documentoCalibracion,precioCalibracion FROM Calibracion WHERE UPPER(equipoCalibracion)=UPPER(?)
calibration.save = INSERT INTO  Calibracion(equipoCalibracion,division,exactitud,valorMaximo,valorMinimo,rangoCalibracion,rangoTrabajo,proveedor,fechaRegistro,ProximaCalibracion,documentoCalibracion,precioCalibracion,ejecutadaProxima,fechaEjecutada) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
calibration.update = UPDATE Calibracion SET division=?,exactitud=?,valorMaximo=?,valorMinimo=?,rangoCalibracion=?,rangoTrabajo=?,proveedor=?,documentoCalibracion=?,precioCalibracion=?,ejecutadaProxima=?,fechaEjecutada=? WHERE codigoCalibracion=?
calibration.delete = DELETE FROM Calibracion WHERE codigoCalibracion=?
calibration.select = SELECT C.codigoCalibracion,C.equipoCalibracion,E.codigoInventario,E.codigoMetrologia,E.numeroSerie,E.nombreEquipo,E.marca,E.modelo,E.ubicacion,E.fechaRegistro as fechaRegistroEquipo,E.clienteRegistro,E.idTipoEquipo,E.frecuenciaCalibacion,E.frecuenciaMantenimiento,E.frecuenciaCalifiOperativa,E.frecuenciaCalifiDesempeno,E.fotoEquipo,E.extencionFoto,E.estado,E.observaciones,C.division,C.exactitud,C.valorMaximo,C.valorMinimo,C.rangoCalibracion,C.rangoTrabajo,C.proveedor,C.fechaRegistro,C.ProximaCalibracion,C.fechaEjecutada,C.ejecutadaProxima,C.documentoCalibracion,C.precioCalibracion,ROW_NUMBER() OVER (order by  C.codigoCalibracion) AS RNUM FROM Calibracion C INNER JOIN Equipo E ON C.equipoCalibracion=E.codigoInventario WHERE 1=1
calibration.selectCount = SELECT count(*) as counter FROM Calibracion where 1=1
provider.select = SELECT APELLIDO1,APELLIDO2,AUTORET,BANCO,CALIFCALID,CALIFTIEMP,CANAL,CDCIIU,CIIU,CIUDAD,CIUDADPRV,CODALTERNO,CODDESFIN,CODDESFINP,CODIGOCTA,CODIGOCTAP,CODPOSTAL,CODPOSTALP,CODPRECIO,CODPRECIOP,CODRETE,CODRETEP,CODRUTA,COL_DEL,COMENTARIO,CONTACTO,CONTRIBUYE,CTACTE,CUPOCR,CUPOCRP,CURP,DESCCOMER,DESCCOMERP,DESCFINAN,DESCFINANP,DETALLE,DIRECCION,EMAIL,EMAILP,ENTRECALLE,ESCLIENTE,ESPROVEE,ESTRATO,EXTERIOR,FECHAING,FECNAC,HABILITADO,IDENTIFICA,INTCAR,LOCAL,NIT,NITSUCUR,NOMBRE,NOMBRE1,NOMBRE2,NRORESOL,NUMCTA,PAGINAWEB,PASSWORD,PASSWPROV,PERIODOFAC,PERSONANJ,PLAZO,PLAZOP,PORAIU,PORAIUP,PRETICA,PRETICAP,PRETIVA,PRETIVAP,REGSIMP,REPORTDC,RESPRETE,RETICA,RETICAP,STADSINCRO,SUCURSAL,TEL1,TEL2,TIPOCAR,TIPOCLI,TIPOCTA,TIPOCXP,TIPOIDEN,TIPOPER,TIPOPRV,VENDEDOR,ZONA,ISPROSPECT,CLASE,IDCANALENT,PAIS,AVALCOD,AVALDIREC,AVALNOMBRE,AVALTEL,CIUDADMX,CONSUMIDOR,CONTESP,DELEGACION,ESMAQUILA,ESTADOMX,FECING,FECMOD,IDADJUNTOS,INDEPENDIE,LOCALIDAD,NROENTREGA,NROINTERNO,PAISMX,PASSWORDIN,PASSWORDMO,TIDENTI,IDGRUPOCLT,PFOTO,PRETPERC,PRETPERP,CODDEPTO,ESDECLARA,ESPERCAR,ESRESPCREE,FACELECTRO,NUMCUENTA,ESRETCREE  FROM MTPROCLI;
calibration.selectBefore =  SELECT TOP 1 C.codigoCalibracion,C.equipoCalibracion,E.codigoInventario,E.codigoMetrologia,E.numeroSerie,E.nombreEquipo,E.marca,E.modelo,E.ubicacion,E.fechaRegistro as fechaRegistroEquipo,E.clienteRegistro,E.idTipoEquipo,E.frecuenciaCalibacion,E.frecuenciaMantenimiento,E.frecuenciaCalifiOperativa,E.frecuenciaCalifiDesempeno,E.fotoEquipo,E.extencionFoto,E.estado,E.observaciones,C.division,C.exactitud,C.valorMaximo,C.valorMinimo,C.rangoCalibracion,C.rangoTrabajo,C.proveedor,C.fechaRegistro,C.ProximaCalibracion,C.fechaEjecutada,C.ejecutadaProxima,C.documentoCalibracion,C.precioCalibracion FROM Calibracion C INNER JOIN Equipo E ON C.equipoCalibracion=E.codigoInventario WHERE C.equipoCalibracion=? AND C.fechaRegistro<? order by C.fechaRegistro desc;


###Maintenance EQUIPMENT###
equipment.maintenanceEquipment = SELECT idMantenimiento,equipoMantenimiento,tipoMantenimiento,responsable,recibido,registrado,anomalias,labores,observaciones,proveedores,fechaRegistr,proximoMantenimiento,precioMantenimiento,fechaEjecutada,ejecutadaProxima FROM MantenimientoEquipos WHERE UPPER(equipoMantenimiento)=UPPER(?)
maintenanceEquipment.save = INSERT INTO MantenimientoEquipos (equipoMantenimiento,tipoMantenimiento,responsable,recibido,registrado,anomalias,labores,observaciones,proveedores,fechaRegistr,proximoMantenimiento,precioMantenimiento,fechaEjecutada,ejecutadaProxima) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
maintenanceEquipment.update = UPDATE MantenimientoEquipos SET tipoMantenimiento=?,responsable=?,recibido=?,registrado=?,anomalias=?,labores=?,observaciones=?,proveedores=?,precioMantenimiento=?,fechaEjecutada=?,ejecutadaProxima=? WHERE idMantenimiento=?
maintenanceEquipment.delete = DELETE FROM MantenimientoEquipos WHERE idMantenimiento=?
maintenanceEquipment.select = SELECT M.idMantenimiento,M.equipoMantenimiento,M.tipoMantenimiento,M.responsable,M.recibido,M.registrado,M.anomalias,M.labores,M.observaciones as observacionesMantenimiento,M.proveedores,M.fechaRegistr,M.proximoMantenimiento,M.precioMantenimiento,M.fechaEjecutada,M.ejecutadaProxima,E.codigoInventario,E.codigoMetrologia,E.numeroSerie,E.nombreEquipo,E.marca,E.modelo,E.ubicacion,E.fechaRegistro as fechaRegistroEquipo,E.clienteRegistro,E.idTipoEquipo,E.frecuenciaCalibacion,E.frecuenciaMantenimiento,E.frecuenciaCalifiOperativa,E.frecuenciaCalifiDesempeno,E.fotoEquipo,E.extencionFoto,E.estado,E.observaciones as observacionesEquipo,U.nombresUsuario,U.apellidosUsuario,ROW_NUMBER() OVER (order by  M.idMantenimiento) AS RNUM FROM MantenimientoEquipos M INNER JOIN Equipo E ON M.equipoMantenimiento=E.codigoInventario INNER JOIN Usuario U ON U.numeroId=M.registrado WHERE 1=1
maintenanceEquipment.selectCount = SELECT count(*) as counter FROM MantenimientoEquipos where 1=1
maintenanceEquipment.selectBefore = SELECT TOP 1 M.idMantenimiento,M.equipoMantenimiento,E.codigoInventario,E.codigoMetrologia,E.numeroSerie,E.nombreEquipo,E.marca,E.modelo,E.ubicacion,E.fechaRegistro as fechaRegistroEquipo,E.clienteRegistro,E.idTipoEquipo,E.frecuenciaCalibacion,E.frecuenciaMantenimiento,E.frecuenciaCalifiOperativa,E.frecuenciaCalifiDesempeno,E.fotoEquipo,E.extencionFoto,E.estado,E.observaciones as observacionesEquipo,M.tipoMantenimiento,M.responsable,M.recibido,M.registrado,M.anomalias,M.labores,M.observaciones as observacionesMantenimiento,M.proveedores,M.fechaRegistr,M.proximoMantenimiento,M.precioMantenimiento,M.fechaEjecutada,M.ejecutadaProxima,U.nombresUsuario,U.apellidosUsuario FROM MantenimientoEquipos M INNER JOIN Equipo E ON M.equipoMantenimiento=E.codigoInventario INNER JOIN Usuario U ON U.numeroId=M.registrado WHERE M.equipoMantenimiento=? AND M.fechaRegistr<? order by M.fechaRegistr desc;


###Maintenance INSTRUMENT###
equipment.maintenanceInstrument = SELECT idMantenimiento,equipoMantenimiento,tipoMantenimiento,responsable,recibido,registrado,anomalias,labores,observaciones,proveedores,fechaRegistr,proximoMantenimiento,precioMantenimiento,fechaEjecutada,ejecutadaProxima FROM MantenimientoInstrumentos WHERE UPPER(equipoMantenimiento)=UPPER(?)
maintenanceInstrument.save = INSERT INTO MantenimientoInstrumentos (equipoMantenimiento,tipoMantenimiento,responsable,recibido,registrado,anomalias,labores,observaciones,proveedores,fechaRegistr,proximoMantenimiento,precioMantenimiento,fechaEjecutada,ejecutadaProxima) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
maintenanceInstrument.update = UPDATE MantenimientoInstrumentos SET tipoMantenimiento=?,responsable=?,recibido=?,registrado=?,anomalias=?,labores=?,observaciones=?,proveedores=?,precioMantenimiento=?,fechaEjecutada=?,ejecutadaProxima=? WHERE idMantenimiento=?
maintenanceInstrument.delete = DELETE FROM MantenimientoInstrumentos WHERE idMantenimiento=?
maintenanceInstrument.select = SELECT M.idMantenimiento,M.equipoMantenimiento,M.tipoMantenimiento,M.responsable,M.recibido,M.registrado,M.anomalias,M.labores,M.observaciones as observacionesMantenimiento,M.proveedores,M.fechaRegistr,M.proximoMantenimiento,M.precioMantenimiento,M.fechaEjecutada,M.ejecutadaProxima,E.codigoInventario,E.codigoMetrologia,E.numeroSerie,E.nombreEquipo,E.marca,E.modelo,E.ubicacion,E.fechaRegistro as fechaRegistroEquipo,E.clienteRegistro,E.idTipoEquipo,E.frecuenciaCalibacion,E.frecuenciaMantenimiento,E.frecuenciaCalifiOperativa,E.frecuenciaCalifiDesempeno,E.fotoEquipo,E.extencionFoto,E.estado,E.observaciones as observacionesEquipo,U.nombresUsuario,U.apellidosUsuario,ROW_NUMBER() OVER (order by  M.idMantenimiento) AS RNUM FROM MantenimientoInstrumentos M INNER JOIN Equipo E ON M.equipoMantenimiento=E.codigoInventario INNER JOIN Usuario U ON U.numeroId=M.registrado WHERE 1=1
maintenanceInstrument.selectCount = SELECT count(*) as counter FROM MantenimientoInstrumentos where 1=1
maintenanceInstrument.selectBefore =  SELECT TOP 1 M.idMantenimiento,M.equipoMantenimiento,E.codigoInventario,E.codigoMetrologia,E.numeroSerie,E.nombreEquipo,E.marca,E.modelo,E.ubicacion,E.fechaRegistro as fechaRegistroEquipo,E.clienteRegistro,E.idTipoEquipo,E.frecuenciaCalibacion,E.frecuenciaMantenimiento,E.frecuenciaCalifiOperativa,E.frecuenciaCalifiDesempeno,E.fotoEquipo,E.extencionFoto,E.estado,E.observaciones as observacionesEquipo,M.tipoMantenimiento,M.responsable,M.recibido,M.registrado,M.anomalias,M.labores,M.observaciones as observacionesMantenimiento,M.proveedores,M.fechaRegistr,M.proximoMantenimiento,M.precioMantenimiento,M.fechaEjecutada,M.ejecutadaProxima,U.nombresUsuario,U.apellidosUsuario FROM MantenimientoInstrumentos M INNER JOIN Equipo E ON M.equipoMantenimiento=E.codigoInventario INNER JOIN Usuario U ON U.numeroId=M.registrado WHERE M.equipoMantenimiento=? AND M.fechaRegistr<? order by M.fechaRegistr desc;


###Calification###
equipment.califiation = SELECT equipoCalificacion,calificacionDiseno,calificacionInstalacion,calificacionOperacion,calificacionDesempeno FROM Calificacion WHERE UPPER(equipoCalificacion)=UPPER(?)
califiation.save = INSERT INTO Calificacion (equipoCalificacion,calificacionDiseno,calificacionInstalacion,calificacionOperacion,calificacionDesempeno) VALUES (?,?,?,?,?)
califiation.select = SELECT C.equipoCalificacion,C.calificacionDiseno,C.calificacionInstalacion,C.calificacionOperacion,C.calificacionDesempeno,E.codigoInventario,E.codigoMetrologia,E.numeroSerie,E.nombreEquipo,E.marca,E.modelo,E.ubicacion,E.fechaRegistro as fechaRegistroEquipo,E.clienteRegistro,E.idTipoEquipo,E.frecuenciaCalibacion,E.frecuenciaMantenimiento,E.frecuenciaCalifiOperativa,E.frecuenciaCalifiDesempeno,E.fotoEquipo,E.extencionFoto,E.estado,E.observaciones FROM Calificacion C INNER JOIN Equipo E ON C.equipoCalificacion=E.codigoInventario WHERE 1=1
califiation.update = UPDATE Calificacion SET calificacionDiseno=?,calificacionInstalacion=?,calificacionOperacion=?,calificacionDesempeno=? WHERE equipoCalificacion=?

###Program Calification###
califiation.program.save = INSERT INTO ProgramacionCalificaciones (equipoCalificacion,tipoCalificacion,fechaRegistro,proximaCalificacion,cumplimiento) VALUES (?,?,?,?,?)
califiation.program.selectBefore =  SELECT TOP 1 P.codigoProgramacion,P.equipoCalificacion,E.codigoInventario,E.codigoMetrologia,E.numeroSerie,E.nombreEquipo,E.marca,E.modelo,E.ubicacion,E.fechaRegistro as fechaRegistroEquipo,E.clienteRegistro,E.idTipoEquipo,E.frecuenciaCalibacion,E.frecuenciaMantenimiento,E.frecuenciaCalifiOperativa,E.frecuenciaCalifiDesempeno,E.fotoEquipo,E.extencionFoto,E.estado,E.observaciones,P.tipoCalificacion,P.fechaRegistro,P.proximaCalificacion,P.fechaEjecutada,P.cumplimiento FROM ProgramacionCalificaciones P INNER JOIN Equipo E ON P.equipoCalificacion=E.codigoInventario WHERE P.equipoCalificacion=? AND P.fechaRegistro<? AND P.tipoCalificacion=? AND P.fechaEjecutada is null order by P.fechaRegistro desc
califiation.program.select =  SELECT P.codigoProgramacion,P.equipoCalificacion,E.codigoInventario,E.codigoMetrologia,E.numeroSerie,E.nombreEquipo,E.marca,E.modelo,E.ubicacion,E.fechaRegistro as fechaRegistroEquipo,E.clienteRegistro,E.idTipoEquipo,E.frecuenciaCalibacion,E.frecuenciaMantenimiento,E.frecuenciaCalifiOperativa,E.frecuenciaCalifiDesempeno,E.fotoEquipo,E.extencionFoto,E.estado,E.observaciones,P.tipoCalificacion,P.fechaRegistro,P.proximaCalificacion,P.fechaEjecutada,P.cumplimiento FROM ProgramacionCalificaciones P INNER JOIN Equipo E ON P.equipoCalificacion=E.codigoInventario WHERE 1=1
calification.program.update = UPDATE ProgramacionCalificaciones SET fechaEjecutada=?,cumplimiento=? WHERE codigoProgramacion=?

###Notifications###
notification.get = SELECT (SELECT COUNT(*) FROM Equipo WHERE codigoMetrologia IS NULL AND ubicacion IS NULL) AS EquiposNuevos,(SELECT COUNT(*) FROM Calibracion WHERE DATEDIFF(MONTH,DATEADD(MONTH, DATEDIFF(MONTH, 0, ProximaCalibracion), 0),GETDATE())=0 AND fechaEjecutada is null) AS CalibracionesMes,(SELECT COUNT(*) FROM Calibracion WHERE DATEDIFF(MONTH,DATEADD(MONTH, DATEDIFF(MONTH, 0, ProximaCalibracion), 0),GETDATE())>0 AND fechaEjecutada is null) AS CalibracionesVencidas,(SELECT COUNT(*) FROM MantenimientoInstrumentos WHERE DATEDIFF(MONTH,DATEADD(MONTH, DATEDIFF(MONTH, 0, proximoMantenimiento), 0),GETDATE())=0 AND fechaEjecutada is null) AS MantInstrumentosMes,(SELECT COUNT(*) FROM MantenimientoInstrumentos WHERE DATEDIFF(MONTH,DATEADD(MONTH, DATEDIFF(MONTH, 0, proximoMantenimiento), 0),GETDATE())>0 AND fechaEjecutada is null) AS MantInstrumentosVencidas,(SELECT COUNT(*) FROM MantenimientoEquipos WHERE DATEDIFF(MONTH,DATEADD(MONTH, DATEDIFF(MONTH, 0, proximoMantenimiento), 0),GETDATE())=0 AND fechaEjecutada is null) AS MantEquiposMes,(SELECT COUNT(*) FROM MantenimientoEquipos WHERE DATEDIFF(MONTH,DATEADD(MONTH, DATEDIFF(MONTH, 0, proximoMantenimiento), 0),GETDATE())>0 AND fechaEjecutada is null) AS MantEquiposVencidas,(SELECT COUNT(*) FROM ProgramacionCalificaciones WHERE DATEDIFF(MONTH,DATEADD(MONTH, DATEDIFF(MONTH, 0, proximaCalificacion), 0),GETDATE())=0 AND fechaEjecutada is null) AS CalificacionesMes,(SELECT COUNT(*) FROM ProgramacionCalificaciones WHERE DATEDIFF(MONTH,DATEADD(MONTH, DATEDIFF(MONTH, 0, proximaCalificacion), 0),GETDATE())>0 AND fechaEjecutada is null) AS CalificacionesVencidas


##Pagination##
pagination.start = SELECT * FROM (SELECT XXX.* FROM (
pagination.end = )XXX)as datos WHERE RNUM >=?+1 AND  RNUM <=?+1

